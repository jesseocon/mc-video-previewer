/**
 * mc-video-preview v0.1.0 ()
 * Copyright 2015 Jesse Ocon
 * Licensed under MIT
 */
"use strict";!function(e,o,t){o.module("mcVideo",["VideoPreviewer","videoSupportChecker"]).directive("mcVideo",["VideoPreviewer","videoSupportChecker","$timeout",function(e,o,i){return{restrict:"E",transclude:!0,scope:{path:"=path",close:"&onClose"},template:'<video class="mc-video-previewer-video" autoplay="true" controls="controls" crossorigin="anonymous" ng-show="videoSupported === true" ng-click="close()" style="max-width: 100%;"><source src="{{vidObj.sanitizedPath()}}" type="{{vidObj.mimeType()}}" /></video><ng-transclude ng-show="imgSupported === true"></ng-transclude>',link:function(n,r){var d,u,c,a,p,s,v,h;if(null===n.path||n.path===t)throw new Error("The path attribute must be defined");if(null===n.path||n.path===t)throw new Error("This module requires Video Support Checker");n.imgSupported=!1,n.videoSupported=!1,p=function(){return n.vidObj.isSupportedVideoType()===!0},s=function(){return n.vidObj.isSupportedVideoType()===!1},c=function(){n.imgSupported=!1,n.videoSupported=!0},a=function(){n.imgSupported=!0,n.videoSupported=!1},n.init=function(){null===o.video||o.video===t?a():(n.vidObj=new e({path:n.path},o.video),s()?a():(v=void 0,h=void 0,i(function(){return v=r.find("source"),v.on("error",u),h=r.find("video")[0],h.addEventListener("loadeddata",d)},0,!1)),u=function(){a(),n.$apply()},d=function(){c(),n.$apply()})},n.init(),n.$watch("path",function(e,o){e!==o&&n.init()})}}}])}(window,window.angular),function(e,o,t){o.module("mcVideoPreviewer",["mcVideo","videoMime","VideoPreviewer","videoSupportChecker"])}(window,window.angular),function(e,o,t){o.module("videoMime",[]).service("videoMime",function(){var e,o,i,n,r,d,u;return u=["video/ogg","video/webm","video/mp4"],n=function(n,d){var u,c;if(null===n||n===t)throw new Error("The path argument cannot be blank");if(null===d||d===t)throw new Error("The detections argument cannot be blank");return u=e(n),c=r(u),i(c)&&o(c,d)},e=function(e){var o,t;try{t=e.split(".")}catch(i){throw o=i,new Error("The path argument must be defined")}return t?t[t.length-1]:void 0},r=function(e){if(null===e||e===t)throw new Error("The extension argument cannot be blank");switch(e){case"ogv":return"video/ogg";case"webm":return"video/webm";case"mp4":return"video/mp4";case"m4v":return"video/mp4";case"3gp":return"video/3gpp";default:return"NaV"}},i=function(e){return u.indexOf(e)>-1},o=function(e,o){switch(e){case"video/ogg":return"probably"===o.ogg;case"video/webm":return"probably"===o.webm;case"video/mp4":return"probably"===o.h264;default:return!1}},d={isSupportedVideoType:n,extension:e,mimeType:r}})}(window,window.angular),function(e,o,t){o.module("VideoPreviewer",[]).factory("VideoPreviewer",["videoMime","$sce",function(e,o){var i;return i=function(){function i(e,o){e=e||{},this.videoDetections=o||{},this.path=e.path,this.errorMessages={UNDEFINED_PATH:"The path must be defined to call this function",UNDEFINED_BROWSER_DETECTIONS:"The video detections must be defined"}}return i.prototype.sanitizedPath=function(){return o.trustAsResourceUrl(this.path)},i.prototype.extension=function(){var o,t;t=void 0;try{t=e.extension(this.path)}catch(i){throw o=i,new Error({error:o,reason:"The filepath is not defined"})}return t},i.prototype.mimeType=function(){var o,i;return o=this.extension(),i=void 0,null!==o||o!==t?e.mimeType(o):void 0},i.prototype.isSupportedVideoType=function(){return e.isSupportedVideoType(this.path,this.videoDetections)},i}()}])}(window,window.angular),function(e,o,t){o.module("videoSupportChecker",[]).service("videoSupportChecker",function(){var e,o,i,n,r,d;return o=function(){return!!document.createElement("video").canPlayType},i=function(){var e=document.createElement("video");return e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},n=function(){var e=document.createElement("video");return e.canPlayType('video/ogg; codecs="theora, vorbis"')},r=function(){var e=document.createElement("video");return e.canPlayType('video/webm; codecs="vp8, vorbis"')},d=o()===!0?{webm:r(),ogg:n(),h264:i()}:t,e={video:d}})}(window,window.angular);