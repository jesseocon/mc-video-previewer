/**
 * mc-video-preview v0.1.0 ()
 * Copyright 2015 Jesse Ocon
 * Licensed under MIT
 */
"use strict";!function(e,o,i){o.module("mcVideoPreview.mcVideo",["mcVideoPreview.VideoPreviewer","mcVideoPreview.videoSupportChecker"]).directive("mcVideo",["VideoPreviewer","videoSupportChecker","$timeout",function(e,o,i){return{restrict:"E",controller:"TestController",scope:{path:"=path"},template:'<div class="mc-video-preview">{{message}}</div>',link:function(o,r,t){var n,d,u,c;if(null==o.path)throw new Error("The path attribute must be defined");if(null==o.path)throw new Error("This module requires Video Support Checker");return o.imgSupported=!1,o.videoSupported=!1,o.vidObj=new e({path:o.path},videoSupportChecker.video),o.isSupported=function(){return o.vidObj.isSupportedVideoType()===!0},o.isntSupported=function(){return o.vidObj.isSupportedVideoType()===!1},o.displayVideo=function(){return o.$apply(function(){return o.imgSupported=!1,o.videoSupported=!0})},o.displayImage=function(){return o.$apply(function(){return o.imgSupported=!0,o.videoSupported=!1})},o.isntSupported()?o.displayImage():(u=void 0,c=void 0,i(function(){return u=r.find("source"),u.on("error",d),c=r.find("video")[0],c.addEventListener("loadeddata",n)},0,!1),d=function(e){return o.displayImage()},void(n=function(e){return o.displayVideo()}))}}}])}(window,window.angular),function(e,o,i){o.module("mcVideoPreview",["mcVideoPreview.mcVideo","mcVideoPreview.videoMime","mcVideoPreview.VideoPreviewer","mcVideoPreview.videoSupportChecker"])}(window,window.angular),function(e,o,i){o.module("mcVideoPreview.videoMime",[]).service("videoMime",function(){var e,o,i,r,t,n,d;return d=["video/ogg","video/webm","video/mp4"],r=function(r,n){var d,u;if(null==r)throw new Error("The path argument cannot be blank");if(null==n)throw new Error("The detections argument cannot be blank");return d=e(r),u=t(d),i(u)&&o(u,n)},e=function(e){var o,i;try{i=e.split(".")}catch(r){throw o=r,new Error("The path argument must be defined")}return i?i[i.length-1]:void 0},t=function(e){if(null==e)throw new Error("The extension argument cannot be blank");switch(e){case"ogv":return"video/ogg";case"webm":return"video/webm";case"mp4":return"video/mp4";case"m4v":return"video/mp4";case"3gp":return"video/3gpp";default:return"NaV"}},i=function(e){return d.indexOf(e)>-1},o=function(e,o){switch(e){case"video/ogg":return"probably"===o.ogg;case"video/webm":return"probably"===o.webm;case"video/mp4":return"probably"===o.h264;default:return!1}},n={isSupportedVideoType:r,extension:e,mimeType:t}})}(window,window.angular),function(e,o,i){o.module("mcVideoPreview.VideoPreviewer",[]).factory("VideoPreviewer",["videoMime","$sce",function(e,o){var i;return i=function(){function i(e,o){e=e||{},this.videoDetections=o||{},this.path=e.path,this.errorMessages={UNDEFINED_PATH:"The path must be defined to call this function",UNDEFINED_BROWSER_DETECTIONS:"The video detections must be defined"}}return i.prototype.sanitizedPath=function(){return o.trustAsResourceUrl(this.path)},i.prototype.extension=function(){var o,i;i=void 0;try{i=e.extension(this.path)}catch(r){throw o=r,new Error({error:o,reason:"The filepath is not defined"})}},i.prototype.mimeType=function(){var o,i;return o=this.extension(),i=void 0,null!=o?e.mimeType(o):void 0},i.prototype.isSupportedVideoType=function(){return e.isSupportedVideoType(this.path,this.videoDetections)},i}()}])}(window,window.angular),function(e,o,i){o.module("mcVideoPreview.videoSupportChecker",[]).service("videoSupportChecker",function(){var e,o,i,r,t,n,o=function(){return!!document.createElement("video").canPlayType},i=function(){var e=document.createElement("video");return e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},r=function(){var e=document.createElement("video");return e.canPlayType('video/ogg; codecs="theora, vorbis"')},t=function(){var e=document.createElement("video");return e.canPlayType('video/webm; codecs="vp8, vorbis"')};return n=new Boolean(o()),!!n==!0&&(n.webm=t(),n.ogg=r(),n.h264=i()),e={video:n}})}(window,window.angular);