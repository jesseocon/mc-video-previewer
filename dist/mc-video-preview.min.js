/**
 * mc-video-preview v0.1.0 ()
 * Copyright 2015 Jesse Ocon
 * Licensed under MIT
 */
"use strict";!function(e,r,o){r.module("mcVideoPreviewer.mcVideo",["mcVideoPreviewer.VideoPreviewer","mcVideoPreviewer.videoSupportChecker"]).directive("mcVideo",["VideoPreviewer","videoSupportChecker","$timeout",function(e,r,i){return{restrict:"E",controller:"TestController",scope:{path:"=path"},template:'<div class="mc-video-preview">{{message}}</div>',link:function(t,n){var d,u,c,a,p,v,m,s;if(null===t.path||t.path===o)throw new Error("The path attribute must be defined");if(null===t.path||t.path===o)throw new Error("This module requires Video Support Checker");t.imgSupported=!1,t.videoSupported=!1,p=function(){return t.vidObj.isSupportedVideoType()===!0},v=function(){return t.vidObj.isSupportedVideoType()===!1},c=function(){return t.$apply(function(){t.imgSupported=!1,t.videoSupported=!0})},a=function(){return t.$apply(function(){t.imgSupported=!0,t.videoSupported=!1})},null===r.video||r.video===o?a():(t.vidObj=new e({path:t.path},r.video),v()?a():(m=void 0,s=void 0,i(function(){return m=n.find("source"),m.on("error",u),s=n.find("video")[0],s.addEventListener("loadeddata",d)},0,!1)),u=function(){return a()},d=function(){return c()})}}}])}(window,window.angular),function(e,r,o){r.module("mcVideoPreviewer",["mcVideoPreviewer.mcVideo","mcVideoPreviewer.videoMime","mcVideoPreviewer.VideoPreviewer","mcVideoPreviewer.videoSupportChecker"])}(window,window.angular),function(e,r,o){r.module("mcVideoPreview.videoMime",[]).service("videoMime",function(){var e,r,i,t,n,d,u;return u=["video/ogg","video/webm","video/mp4"],t=function(t,d){var u,c;if(null===t||t===o)throw new Error("The path argument cannot be blank");if(null===d||d===o)throw new Error("The detections argument cannot be blank");return u=e(t),c=n(u),i(c)&&r(c,d)},e=function(e){var r,o;try{o=e.split(".")}catch(i){throw r=i,new Error("The path argument must be defined")}return o?o[o.length-1]:void 0},n=function(e){if(null===e||e===o)throw new Error("The extension argument cannot be blank");switch(e){case"ogv":return"video/ogg";case"webm":return"video/webm";case"mp4":return"video/mp4";case"m4v":return"video/mp4";case"3gp":return"video/3gpp";default:return"NaV"}},i=function(e){return u.indexOf(e)>-1},r=function(e,r){switch(e){case"video/ogg":return"probably"===r.ogg;case"video/webm":return"probably"===r.webm;case"video/mp4":return"probably"===r.h264;default:return!1}},d={isSupportedVideoType:t,extension:e,mimeType:n}})}(window,window.angular),function(e,r,o){r.module("mcVideoPreview.VideoPreviewer",[]).factory("VideoPreviewer",["videoMime","$sce",function(e,r){var i;return i=function(){function i(e,r){e=e||{},this.videoDetections=r||{},this.path=e.path,this.errorMessages={UNDEFINED_PATH:"The path must be defined to call this function",UNDEFINED_BROWSER_DETECTIONS:"The video detections must be defined"}}return i.prototype.sanitizedPath=function(){return r.trustAsResourceUrl(this.path)},i.prototype.extension=function(){var r,o;o=void 0;try{o=e.extension(this.path)}catch(i){throw r=i,new Error({error:r,reason:"The filepath is not defined"})}return o},i.prototype.mimeType=function(){var r,i;return r=this.extension(),i=void 0,null!==r||r!==o?e.mimeType(r):void 0},i.prototype.isSupportedVideoType=function(){return e.isSupportedVideoType(this.path,this.videoDetections)},i}()}])}(window,window.angular),function(e,r,o){r.module("mcVideoPreviewer.videoSupportChecker",[]).service("videoSupportChecker",function(){var e,r,i,t,n,d;return r=function(){return!!document.createElement("video").canPlayType},i=function(){var e=document.createElement("video");return e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},t=function(){var e=document.createElement("video");return e.canPlayType('video/ogg; codecs="theora, vorbis"')},n=function(){var e=document.createElement("video");return e.canPlayType('video/webm; codecs="vp8, vorbis"')},d=r()===!0?{webm:n(),ogg:t(),h264:i()}:o,e={video:d}})}(window,window.angular);