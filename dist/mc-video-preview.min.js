/**
 * mc-video-preview v0.1.0 ()
 * Copyright 2015 Jesse Ocon
 * Licensed under MIT
 */
"use strict";!function(e,o,t){o.module("mcVideo",["VideoPreviewer","videoSupportChecker"]).directive("mcVideo",["VideoPreviewer","videoSupportChecker","$timeout","mcVideoPreviewerSettings",function(e,o,r,i){return{restrict:"E",transclude:!0,scope:{path:"=path"},template:'<video class="mc-video-previewer-video" autoplay="{{autoplay}}" controls="{{controls}}" crossorigin="{{crossorigin}}" ng-show="videoSupported === true"><source src="{{vidObj.sanitizedPath()}}" type="{{vidObj.mimeType()}}" /></video><ng-transclude ng-show="imgSupported === true"></ng-transclude>',link:function(n,u){var d,c,a,p,s,v,l,h;if(null===n.path||n.path===t)throw new Error("The path attribute must be defined");if(null===n.path||n.path===t)throw new Error("This module requires Video Support Checker");n.crossorigin=i.crossorigin,n.controls=i.controls,n.autoplay=i.autoplay,n.$watch("path",function(e,o){e!==o&&n.init()}),n.imgSupported=!1,n.videoSupported=!1,s=function(){return n.vidObj.isSupportedVideoType()===!0},v=function(){return n.vidObj.isSupportedVideoType()===!1},a=function(){n.imgSupported=!1,n.videoSupported=!0},p=function(){n.imgSupported=!0,n.videoSupported=!1},n.init=function(){null===o.video||o.video===t?p():(n.vidObj=new e({path:n.path},o.video),v()?p():(l=void 0,h=void 0,r(function(){return l=u.find("source"),l.on("error",c),h=u.find("video")[0],h.addEventListener("loadeddata",d)},0,!1)),c=function(){p(),n.$apply()},d=function(){a(),n.$apply()})},n.init()}}}])}(window,window.angular),angular.module("mcVideoPreviewerSettings",[]).provider("mcVideoPreviewerSettings",function(){var e,o={crossorigin:"anonymous",autoplay:!0,controls:"controls"},t=function(){return e||(e=angular.copy(o)),e};return this.set=function(e,o){var r=t();return angular.isObject(e)?angular.extend(r,e):r[e]=o,this},this.$get=t,this}),function(e,o,t){o.module("mcVideoPreviewer",["mcVideo","videoMime","VideoPreviewer","videoSupportChecker","mcVideoPreviewerSettings"])}(window,window.angular),function(e,o,t){o.module("videoMime",[]).service("videoMime",function(){var e,o,r,i,n,u,d;return d=["video/ogg","video/webm","video/mp4"],i=function(i,u){var d,c;if(null===i||i===t)throw new Error("The path argument cannot be blank");if(null===u||u===t)throw new Error("The detections argument cannot be blank");return d=e(i),c=n(d),r(c)&&o(c,u)},e=function(e){var o,t;try{t=e.split(".")}catch(r){throw o=r,new Error("The path argument must be defined")}return t?t[t.length-1]:void 0},n=function(e){if(null===e||e===t)throw new Error("The extension argument cannot be blank");switch(e){case"ogv":return"video/ogg";case"webm":return"video/webm";case"mp4":return"video/mp4";case"m4v":return"video/mp4";case"3gp":return"video/3gpp";default:return"NaV"}},r=function(e){return d.indexOf(e)>-1},o=function(e,o){switch(e){case"video/ogg":return"probably"===o.ogg;case"video/webm":return"probably"===o.webm;case"video/mp4":return"probably"===o.h264;default:return!1}},u={isSupportedVideoType:i,extension:e,mimeType:n}})}(window,window.angular),function(e,o,t){o.module("VideoPreviewer",[]).factory("VideoPreviewer",["videoMime","$sce",function(e,o){var r;return r=function(){function r(e,o){e=e||{},this.videoDetections=o||{},this.path=e.path,this.errorMessages={UNDEFINED_PATH:"The path must be defined to call this function",UNDEFINED_BROWSER_DETECTIONS:"The video detections must be defined"}}return r.prototype.sanitizedPath=function(){return o.trustAsResourceUrl(this.path)},r.prototype.extension=function(){var o,t;t=void 0;try{t=e.extension(this.path)}catch(r){throw o=r,new Error({error:o,reason:"The filepath is not defined"})}return t},r.prototype.mimeType=function(){var o,r;return o=this.extension(),r=void 0,null!==o||o!==t?e.mimeType(o):void 0},r.prototype.isSupportedVideoType=function(){return e.isSupportedVideoType(this.path,this.videoDetections)},r}()}])}(window,window.angular),function(e,o,t){o.module("videoSupportChecker",[]).service("videoSupportChecker",function(){var e,o,r,i,n,u;return o=function(){return!!document.createElement("video").canPlayType},r=function(){var e=document.createElement("video");return e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},i=function(){var e=document.createElement("video");return e.canPlayType('video/ogg; codecs="theora, vorbis"')},n=function(){var e=document.createElement("video");return e.canPlayType('video/webm; codecs="vp8, vorbis"')},u=o()===!0?{webm:n(),ogg:i(),h264:r()}:t,e={video:u}})}(window,window.angular);